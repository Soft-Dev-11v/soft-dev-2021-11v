{% extends "layouts/RecipesBase.html" %}

{% block title %} RECIPIES {% endblock %} 

{% block stylesheets %}{% endblock stylesheets %}

{% block content %}



<div class="section section-lg">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-12">
                <div class="mb-5">
                    <table class="table" id = "recipietable">
                        <tbody>
                            <tr>
                                <th scope="row" id="ingredients">
                                    <form method="post" action="" class="mt-4" id = "ingredientsForm">
                                        <div class="form-group mb-4">
                                            <div class="mb-3">
                                                <label for="exampleFormControlTextarea1">Enter Ingredients</label>
                                                {{ form.ingredients(class="form-control", id="ingrform") }}
                                            </div>
                                        </div>
                                        <button class="btn btn-block btn-primary" type="submit">Get recipies</button>
                                    </form>
                                </th>
                            </tr>
                        </tbody>
                    </table>

                </div>
            </div>
        </div>
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.5.1.js"
          integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
          crossorigin="anonymous">
</script>
 
<script type="text/javascript">
    $(document).on('submit','#ingredientsForm',function(e)
    {
        e.preventDefault();
        $.ajax({
        type:'POST',
        url:'/Recipes.html',
        data:{
            ingredients:$("#ingrform").val()
        },
        success:function(data)
        {
            for(recipie in data){
                var value = data[recipie]
                var row = "<tr><td>" + value + "</td></tr>";
                $('#recipietable').append(row);
            }
        }
        })
    });
</script>


  

{% endblock content %}

{% block javascripts %}{% endblock javascripts %}